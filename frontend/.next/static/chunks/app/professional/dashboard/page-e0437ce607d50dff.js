(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[135],{6772:(e,t,n)=>{Promise.resolve().then(n.bind(n,6181))},6181:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var s=n(5155),r=n(8173),a=n.n(r),o=n(2115),i=n(6046),c=n(5739),l=n(4651);function d(){let e=(0,i.useRouter)(),[t,n]=(0,o.useState)(""),[r,d]=(0,o.useState)(""),[h,u]=(0,o.useState)([]),[m,g]=(0,o.useState)([]),[x,j]=(0,o.useState)([]),[f,S]=(0,o.useState)([]),[v,p]=(0,o.useState)([]),[N,I]=(0,o.useState)([]),[b,k]=(0,o.useState)(null),[A,y]=(0,o.useState)("Listo"),R=(0,o.useMemo)(()=>v.filter(e=>"in"===e.type).reduce((e,t)=>e+Number(t.amount),0),[v]);async function _(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;try{let[t,s,r,a,o,i,l]=await Promise.all([(0,c.A)("/appointments",{token:e,tenantId:n}),(0,c.A)("/clients",{token:e,tenantId:n}),(0,c.A)("/services",{token:e,tenantId:n}),(0,c.A)("/orders",{token:e,tenantId:n}),(0,c.A)("/cash-movements",{token:e,tenantId:n}),(0,c.A)("/invoices",{token:e,tenantId:n}),(0,c.A)("/orders/financial-summary",{token:e,tenantId:n})]);u(t),g(s),j(r),S(a),p(o),I(i),k(l),y("Panel actualizado")}catch(e){y("Error: ".concat(e.message))}}return(0,o.useEffect)(()=>{let t=(0,l.Ht)();if(!t.token||!t.tenantId){e.replace("/login");return}n(t.token),d(t.tenantId),_(t.token,t.tenantId)},[e]),(0,s.jsxs)("main",{children:[(0,s.jsx)("div",{className:"brand",children:"NILA"}),(0,s.jsx)("div",{className:"brandTag",children:"Strategy \xb7 Technology \xb7 Execution"}),(0,s.jsx)("h1",{className:"sectionTitle",children:"Panel Profesional"}),(0,s.jsxs)("div",{className:"grid",children:[(0,s.jsxs)("section",{className:"card",children:[(0,s.jsx)("h2",{children:"Agenda"}),(0,s.jsxs)("p",{children:[h.length," turnos totales"]})]}),(0,s.jsxs)("section",{className:"card",children:[(0,s.jsx)("h2",{children:"Clientes"}),(0,s.jsxs)("p",{children:[m.length," clientes activos"]})]}),(0,s.jsxs)("section",{className:"card",children:[(0,s.jsx)("h2",{children:"Servicios"}),(0,s.jsxs)("p",{children:[x.length," servicios publicados"]})]}),(0,s.jsxs)("section",{className:"card",children:[(0,s.jsx)("h2",{children:"POS"}),(0,s.jsxs)("p",{children:["Ingresos registrados: ARS ",R.toLocaleString("es-AR")]})]}),(0,s.jsxs)("section",{className:"card",children:[(0,s.jsx)("h2",{children:"Ordenes"}),(0,s.jsxs)("p",{children:[f.length," ordenes | pagadas: ",f.filter(e=>"paid"===e.status).length]})]}),(0,s.jsxs)("section",{className:"card",children:[(0,s.jsx)("h2",{children:"Facturas"}),(0,s.jsxs)("p",{children:[N.length," emitidas"]})]})]}),(0,s.jsxs)("section",{className:"card",style:{marginTop:12},children:[(0,s.jsx)("h2",{children:"Resumen Financiero"}),b?(0,s.jsxs)("div",{className:"grid",style:{marginTop:6},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Ordenes"}),(0,s.jsx)("br",{}),b.orders_count]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Total ordenes"}),(0,s.jsx)("br",{}),"ARS ",Number(b.orders_total).toLocaleString("es-AR")]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Total cobrado"}),(0,s.jsx)("br",{}),"ARS ",Number(b.payments_total).toLocaleString("es-AR")]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Total facturado"}),(0,s.jsx)("br",{}),"ARS ",Number(b.invoices_total).toLocaleString("es-AR")]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Pendiente"}),(0,s.jsx)("br",{}),"ARS ",Number(b.pending_amount).toLocaleString("es-AR")]})]}):(0,s.jsx)("p",{className:"small",children:"Sin datos"})]}),(0,s.jsxs)("div",{className:"linkRow",children:[(0,s.jsx)("button",{className:"linkBtn",onClick:()=>_(),children:"Refrescar"}),(0,s.jsx)(a(),{className:"mutedBtn",href:"/professional/workspace",children:"Abrir operaciones"}),(0,s.jsx)(a(),{className:"mutedBtn",href:"/professional/tenants",children:"Gestion tenant"}),(0,s.jsx)("button",{className:"mutedBtn",onClick:function(){(0,l.q7)(),e.push("/login")},children:"Cerrar sesion"})]}),(0,s.jsx)("pre",{className:"pre",children:A})]})}},5739:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,e:()=>o});let s="/api";async function r(e,t){let n=e.length>1&&e.endsWith("/")?e.slice(0,-1):e,r=["".concat(s).concat(n),"".concat(s).concat(n,"/")];for(let e=0;e<r.length;e+=1)try{let n=await fetch(r[e],t);if(404!==n.status||e===r.length-1)return n}catch(t){if(e===r.length-1)throw Error("Network error while contacting API")}throw Error("Unexpected API routing state")}async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};t.token&&(n.Authorization="Bearer ".concat(t.token)),t.tenantId&&(n["X-Tenant-ID"]=t.tenantId),void 0!==t.body&&(n["Content-Type"]="application/json");let s=await r(e,{method:t.method||"GET",headers:n,body:void 0!==t.body?JSON.stringify(t.body):void 0});if(!s.ok){let e=await s.text();throw Error("".concat(s.status," ").concat(s.statusText," :: ").concat(e))}return 204===s.status?{}:s.json()}function o(){return s}},4651:(e,t,n)=>{"use strict";n.d(t,{E1:()=>d,Ht:()=>l,dM:()=>h,q7:()=>u});let s="nila_token",r="nila_tenant_id",a="nila_user",o="nila_remember";function i(e){let t=localStorage.getItem(e);return null!==t?t:sessionStorage.getItem(e)||""}function c(e){localStorage.removeItem(e),sessionStorage.removeItem(e)}function l(){let e;let t=i(s),n=i(r),o=i(a);if(o)try{e=JSON.parse(o)}catch(t){e=void 0}return{token:t,tenantId:n,user:e}}function d(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=t?localStorage:sessionStorage,i=t?sessionStorage:localStorage;n.setItem(s,e.token),n.setItem(r,e.tenantId),e.user&&n.setItem(a,JSON.stringify(e.user)),n.setItem(o,t?"1":"0"),i.removeItem(s),i.removeItem(r),i.removeItem(a),i.removeItem(o)}function h(e){localStorage.setItem(r,e)}function u(){c(s),c(r),c(a),c(o)}},6046:(e,t,n)=>{"use strict";var s=n(6658);n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[173,441,517,358],()=>t(6772)),_N_E=e.O()}]);