(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[482],{3395:(e,a,t)=>{Promise.resolve().then(t.bind(t,4692))},4692:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>l});var s=t(5155),n=t(8173),i=t.n(n),c=t(2115),r=t(5739);function l(){let[e,a]=(0,c.useState)(""),[t,n]=(0,c.useState)(""),[l,o]=(0,c.useState)("admin"),[d,u]=(0,c.useState)("admin12345"),[m,h]=(0,c.useState)("Listo"),[p,j]=(0,c.useState)([]),[x,v]=(0,c.useState)([]),[g,N]=(0,c.useState)([]),[f,y]=(0,c.useState)([]),[S,C]=(0,c.useState)([]),[b,w]=(0,c.useState)([]),[k,P]=(0,c.useState)([]),[T,A]=(0,c.useState)([]),[_,O]=(0,c.useState)([]),[B,I]=(0,c.useState)([]),[G,E]=(0,c.useState)([]),[R,q]=(0,c.useState)(null),[M,L]=(0,c.useState)("Centro Aurora Pilates"),[W,D]=(0,c.useState)("centro-aurora"),[z,F]=(0,c.useState)("Clase Pilates"),[J,K]=(0,c.useState)("Pilates"),[U,V]=(0,c.useState)("Maria Perez"),[X,H]=(0,c.useState)("maria@example.com"),[Q,Y]=(0,c.useState)(""),[Z,$]=(0,c.useState)(""),[ee,ea]=(0,c.useState)("2026-02-20T18:00"),[et,es]=(0,c.useState)("2026-02-20T19:00"),[en,ei]=(0,c.useState)(""),[ec,er]=(0,c.useState)("2026-02-20"),[el,eo]=(0,c.useState)(""),[ed,eu]=(0,c.useState)(""),[em,eh]=(0,c.useState)(""),[ep,ej]=(0,c.useState)("Sesion Pilates"),[ex,ev]=(0,c.useState)("12000"),[eg,eN]=(0,c.useState)(""),[ef,ey]=(0,c.useState)(""),[eS,eC]=(0,c.useState)(""),[eb,ew]=(0,c.useState)("1"),[ek,eP]=(0,c.useState)("12000"),[eT,eA]=(0,c.useState)(""),[e_,eO]=(0,c.useState)("12000"),[eB,eI]=(0,c.useState)("");function eG(e,t){a(e),localStorage.setItem("nila_token",e),void 0!==t&&(n(t),localStorage.setItem("nila_tenant_id",t))}async function eE(){try{let e=await (0,r.A)("/auth/token/",{method:"POST",body:{username:l,password:d}});eG(e.access),h("Login OK")}catch(e){h("Login error: ".concat(e.message))}}async function eR(){if(!e)return h("Falta token");try{let[a,s,n,i,c,l,o,d,u,m,p,x]=await Promise.all([(0,r.A)("/tenants/",{token:e}),t?(0,r.A)("/services/",{token:e,tenantId:t}):Promise.resolve([]),t?(0,r.A)("/clients/",{token:e,tenantId:t}):Promise.resolve([]),t?(0,r.A)("/appointments/",{token:e,tenantId:t}):Promise.resolve([]),t?(0,r.A)("/waitlists/",{token:e,tenantId:t}):Promise.resolve([]),t?(0,r.A)("/waitlist-offers/",{token:e,tenantId:t}):Promise.resolve([]),t?(0,r.A)("/products/",{token:e,tenantId:t}):Promise.resolve([]),t?(0,r.A)("/orders/",{token:e,tenantId:t}):Promise.resolve([]),t?(0,r.A)("/cash-movements/",{token:e,tenantId:t}):Promise.resolve([]),t?(0,r.A)("/message-queue/",{token:e,tenantId:t}):Promise.resolve([]),t?(0,r.A)("/invoices/",{token:e,tenantId:t}):Promise.resolve([]),t?(0,r.A)("/orders/financial-summary/",{token:e,tenantId:t}):Promise.resolve(null)]);j(a),v(s),N(n),y(i),C(c),w(l),P(o),A(d),O(u),I(m),E(p),q(x),h("Datos actualizados")}catch(e){h("Refresh error: ".concat(e.message))}}async function eq(){try{let a=await (0,r.A)("/tenants/",{method:"POST",token:e,body:{name:M,slug:W}});eG(e,String(a.id)),h("Tenant creado: ".concat(a.name)),await eR()}catch(e){h("Tenant error: ".concat(e.message))}}async function eM(){try{await (0,r.A)("/services/",{method:"POST",token:e,tenantId:t,body:{name:z,discipline:J,duration_min:60,price:12e3,is_online:!1}}),h("Servicio creado"),await eR()}catch(e){h("Servicio error: ".concat(e.message))}}async function eL(){try{await (0,r.A)("/clients/",{method:"POST",token:e,tenantId:t,body:{full_name:U,email:X}}),h("Cliente creado"),await eR()}catch(e){h("Cliente error: ".concat(e.message))}}async function eW(){try{await (0,r.A)("/appointments/",{method:"POST",token:e,tenantId:t,body:{service:Number(Q),client:Number(Z),start_dt:"".concat(ee,":00"),end_dt:"".concat(et,":00"),status:"confirmed"}}),h("Turno creado"),await eR()}catch(e){h("Turno error: ".concat(e.message))}}async function eD(a){try{await (0,r.A)("/appointments/".concat(a,"/cancel/"),{method:"POST",token:e,tenantId:t}),h("Turno ".concat(a," cancelado")),await eR()}catch(e){h("Cancel error: ".concat(e.message))}}async function ez(){try{await (0,r.A)("/waitlists/",{method:"POST",token:e,tenantId:t,body:{service:Number(en),desired_date:ec,status:"active"}}),h("Waitlist creada"),await eR()}catch(e){h("Waitlist error: ".concat(e.message))}}async function eF(){try{await (0,r.A)("/waitlist-entries/",{method:"POST",token:e,tenantId:t,body:{waitlist:Number(el),client:Number(ed),priority:100}}),h("Entrada waitlist creada"),await eR()}catch(e){h("Entry error: ".concat(e.message))}}async function eJ(){try{await (0,r.A)("/waitlist-offers/offer-from-cancel/",{method:"POST",token:e,tenantId:t,body:{appointment_id:Number(em)}}),h("Oferta de waitlist generada"),await eR()}catch(e){h("Offer error: ".concat(e.message))}}async function eK(){try{await (0,r.A)("/products/",{method:"POST",token:e,tenantId:t,body:{name:ep,type:"service",price:Number(ex),is_active:!0}}),h("Producto creado"),await eR()}catch(e){h("Producto error: ".concat(e.message))}}async function eU(){try{await (0,r.A)("/orders/",{method:"POST",token:e,tenantId:t,body:{client:eg?Number(eg):null,status:"draft",total_amount:0,currency:"ARS"}}),h("Orden creada"),await eR()}catch(e){h("Orden error: ".concat(e.message))}}async function eV(){try{await (0,r.A)("/order-items/",{method:"POST",token:e,tenantId:t,body:{order:Number(ef),product:Number(eS),qty:Number(eb),unit_price:Number(ek)}}),h("Item agregado a orden"),await eR()}catch(e){h("Item error: ".concat(e.message))}}async function eX(){try{await (0,r.A)("/payments/",{method:"POST",token:e,tenantId:t,body:{order:Number(eT),method:"cash",amount:Number(e_),external_ref:""}}),h("Pago registrado"),await eR()}catch(e){h("Pago error: ".concat(e.message))}}async function eH(a){try{await (0,r.A)("/orders/".concat(a,"/mark-paid/"),{method:"POST",token:e,tenantId:t}),h("Orden ".concat(a," marcada como pagada")),await eR()}catch(e){h("mark-paid error: ".concat(e.message))}}async function eQ(a){try{await (0,r.A)("/orders/".concat(a,"/create-invoice/"),{method:"POST",token:e,tenantId:t}),h("Factura emitida para orden ".concat(a)),await eR()}catch(e){h("invoice error: ".concat(e.message))}}async function eY(a){try{await (0,r.A)("/waitlist-offers/".concat(a,"/accept/"),{method:"POST",token:e,tenantId:t}),h("Oferta ".concat(a," aceptada")),await eR()}catch(e){h("accept offer error: ".concat(e.message))}}async function eZ(a){try{await (0,r.A)("/waitlist-offers/".concat(a,"/reject/"),{method:"POST",token:e,tenantId:t}),h("Oferta ".concat(a," rechazada")),await eR()}catch(e){h("reject offer error: ".concat(e.message))}}async function e$(){try{await (0,r.A)("/message-queue/queue-appointment-reminder/",{method:"POST",token:e,tenantId:t,body:{appointment_id:Number(eB)}}),h("Recordatorio en cola"),await eR()}catch(e){h("queue reminder error: ".concat(e.message))}}async function e0(a){try{await (0,r.A)("/message-queue/".concat(a,"/mark-sent/"),{method:"POST",token:e,tenantId:t}),h("Mensaje ".concat(a," marcado como enviado")),await eR()}catch(e){h("mark sent error: ".concat(e.message))}}return(0,c.useEffect)(()=>{let e=localStorage.getItem("nila_token")||"",t=localStorage.getItem("nila_tenant_id")||"";a(e),n(t)},[]),(0,s.jsxs)("main",{children:[(0,s.jsx)("div",{className:"brand",children:"NILA"}),(0,s.jsx)("div",{className:"brandTag",children:"Strategy \xb7 Technology \xb7 Execution"}),(0,s.jsx)("h1",{className:"sectionTitle",children:"Workspace Profesional"}),(0,s.jsxs)("p",{className:"small",children:["API: ",(0,r.e)()]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h2",{children:"1) Login y contexto"}),(0,s.jsxs)("div",{className:"formGrid",children:[(0,s.jsx)("input",{className:"input",placeholder:"username",value:l,onChange:e=>o(e.target.value)}),(0,s.jsx)("input",{className:"input",type:"password",placeholder:"password",value:d,onChange:e=>u(e.target.value)}),(0,s.jsx)("button",{className:"linkBtn",onClick:eE,children:"Login"})]}),(0,s.jsxs)("div",{className:"formGrid",style:{marginTop:8},children:[(0,s.jsx)("input",{className:"input",placeholder:"Tenant ID activo",value:t,onChange:e=>{n(e.target.value),localStorage.setItem("nila_tenant_id",e.target.value)}}),(0,s.jsx)("button",{className:"mutedBtn",onClick:eR,children:"Refrescar todo"}),(0,s.jsx)(i(),{className:"mutedBtn",href:"/professional/dashboard",children:"Volver"})]})]}),(0,s.jsxs)("div",{className:"grid",children:[(0,s.jsxs)("section",{className:"card",children:[(0,s.jsx)("h2",{children:"2) Tenant"}),(0,s.jsxs)("div",{className:"formGrid",children:[(0,s.jsx)("input",{className:"input",value:M,onChange:e=>L(e.target.value),placeholder:"Nombre"}),(0,s.jsx)("input",{className:"input",value:W,onChange:e=>D(e.target.value),placeholder:"Slug"}),(0,s.jsx)("button",{className:"linkBtn",onClick:eq,children:"Crear tenant"})]}),(0,s.jsx)("ul",{className:"list",children:p.map(e=>(0,s.jsxs)("li",{children:[e.id," - ",e.name]},e.id))})]}),(0,s.jsxs)("section",{className:"card",children:[(0,s.jsx)("h2",{children:"3) Servicios"}),(0,s.jsxs)("div",{className:"formGrid",children:[(0,s.jsx)("input",{className:"input",value:z,onChange:e=>F(e.target.value),placeholder:"Servicio"}),(0,s.jsx)("input",{className:"input",value:J,onChange:e=>K(e.target.value),placeholder:"Disciplina"}),(0,s.jsx)("button",{className:"linkBtn",onClick:eM,children:"Crear servicio"})]}),(0,s.jsx)("ul",{className:"list",children:x.map(e=>(0,s.jsxs)("li",{children:[e.id," - ",e.name]},e.id))})]}),(0,s.jsxs)("section",{className:"card",children:[(0,s.jsx)("h2",{children:"4) Clientes"}),(0,s.jsxs)("div",{className:"formGrid",children:[(0,s.jsx)("input",{className:"input",value:U,onChange:e=>V(e.target.value),placeholder:"Nombre"}),(0,s.jsx)("input",{className:"input",value:X,onChange:e=>H(e.target.value),placeholder:"Email"}),(0,s.jsx)("button",{className:"linkBtn",onClick:eL,children:"Crear cliente"})]}),(0,s.jsx)("ul",{className:"list",children:g.map(e=>(0,s.jsxs)("li",{children:[e.id," - ",e.full_name]},e.id))})]}),(0,s.jsxs)("section",{className:"card",children:[(0,s.jsx)("h2",{children:"5) Turnos"}),(0,s.jsxs)("div",{className:"formGrid",children:[(0,s.jsxs)("select",{className:"select",value:Q,onChange:e=>Y(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Servicio"}),x.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,s.jsxs)("select",{className:"select",value:Z,onChange:e=>$(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Cliente"}),g.map(e=>(0,s.jsx)("option",{value:e.id,children:e.full_name},e.id))]}),(0,s.jsx)("button",{className:"linkBtn",onClick:eW,children:"Crear turno"})]}),(0,s.jsxs)("div",{className:"formGrid",style:{marginTop:8},children:[(0,s.jsx)("input",{className:"input",type:"datetime-local",value:ee,onChange:e=>ea(e.target.value)}),(0,s.jsx)("input",{className:"input",type:"datetime-local",value:et,onChange:e=>es(e.target.value)}),(0,s.jsx)("input",{className:"input",value:em,onChange:e=>eh(e.target.value),placeholder:"ID turno para offer-from-cancel"})]}),(0,s.jsx)("ul",{className:"list",children:f.map(e=>(0,s.jsxs)("li",{children:[e.id," - ",e.status," ",(0,s.jsx)("button",{className:"mutedBtn",onClick:()=>eD(e.id),children:"Cancelar"})]},e.id))})]}),(0,s.jsxs)("section",{className:"card",children:[(0,s.jsx)("h2",{children:"6) Waitlist"}),(0,s.jsxs)("div",{className:"formGrid",children:[(0,s.jsxs)("select",{className:"select",value:en,onChange:e=>ei(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Servicio"}),x.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,s.jsx)("input",{className:"input",type:"date",value:ec,onChange:e=>er(e.target.value)}),(0,s.jsx)("button",{className:"linkBtn",onClick:ez,children:"Crear waitlist"})]}),(0,s.jsxs)("div",{className:"formGrid",style:{marginTop:8},children:[(0,s.jsxs)("select",{className:"select",value:el,onChange:e=>eo(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Waitlist"}),S.map(e=>(0,s.jsx)("option",{value:e.id,children:e.id},e.id))]}),(0,s.jsxs)("select",{className:"select",value:ed,onChange:e=>eu(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Cliente"}),g.map(e=>(0,s.jsx)("option",{value:e.id,children:e.full_name},e.id))]}),(0,s.jsx)("button",{className:"linkBtn",onClick:eF,children:"Crear entrada"})]}),(0,s.jsx)("div",{className:"linkRow",children:(0,s.jsx)("button",{className:"linkBtn",onClick:eJ,children:"Offer from cancel"})})]}),(0,s.jsxs)("section",{className:"card",children:[(0,s.jsx)("h2",{children:"7) POS + Caja"}),(0,s.jsxs)("div",{className:"formGrid",children:[(0,s.jsx)("input",{className:"input",value:ep,onChange:e=>ej(e.target.value),placeholder:"Producto"}),(0,s.jsx)("input",{className:"input",value:ex,onChange:e=>ev(e.target.value),placeholder:"Precio"}),(0,s.jsx)("button",{className:"linkBtn",onClick:eK,children:"Crear producto"})]}),(0,s.jsxs)("div",{className:"formGrid",style:{marginTop:8},children:[(0,s.jsxs)("select",{className:"select",value:eg,onChange:e=>eN(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Cliente (opcional)"}),g.map(e=>(0,s.jsx)("option",{value:e.id,children:e.full_name},e.id))]}),(0,s.jsx)("button",{className:"linkBtn",onClick:eU,children:"Crear orden"}),(0,s.jsxs)("span",{className:"badge",children:["Ordenes: ",T.length]})]}),(0,s.jsxs)("div",{className:"formGrid",style:{marginTop:8},children:[(0,s.jsxs)("select",{className:"select",value:ef,onChange:e=>ey(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Orden"}),T.map(e=>(0,s.jsx)("option",{value:e.id,children:e.id},e.id))]}),(0,s.jsxs)("select",{className:"select",value:eS,onChange:e=>eC(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Producto"}),k.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,s.jsx)("button",{className:"linkBtn",onClick:eV,children:"Agregar item"})]}),(0,s.jsxs)("div",{className:"formGrid",style:{marginTop:8},children:[(0,s.jsx)("input",{className:"input",value:eb,onChange:e=>ew(e.target.value),placeholder:"qty"}),(0,s.jsx)("input",{className:"input",value:ek,onChange:e=>eP(e.target.value),placeholder:"unit_price"}),(0,s.jsx)("span",{className:"badge",children:"Monto = qty x unit_price"})]}),(0,s.jsxs)("div",{className:"formGrid",style:{marginTop:8},children:[(0,s.jsxs)("select",{className:"select",value:eT,onChange:e=>eA(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Orden pago"}),T.map(e=>(0,s.jsx)("option",{value:e.id,children:e.id},e.id))]}),(0,s.jsx)("input",{className:"input",value:e_,onChange:e=>eO(e.target.value),placeholder:"monto"}),(0,s.jsx)("button",{className:"linkBtn",onClick:eX,children:"Registrar pago"})]}),(0,s.jsx)("ul",{className:"list",children:T.map(e=>(0,s.jsxs)("li",{children:["Orden ",e.id," - ",e.status," - total ",e.total_amount,(0,s.jsx)("button",{className:"mutedBtn",onClick:()=>eH(e.id),children:"Mark paid"}),(0,s.jsx)("button",{className:"mutedBtn",onClick:()=>eQ(e.id),children:"Emitir factura"})]},e.id))}),(0,s.jsxs)("p",{className:"small",children:["Movimientos caja: ",_.length]})]}),(0,s.jsxs)("section",{className:"card",children:[(0,s.jsx)("h2",{children:"8) Ofertas Waitlist"}),(0,s.jsx)("ul",{className:"list",children:b.map(e=>(0,s.jsxs)("li",{children:["Oferta ",e.id," - estado ",e.status," - turno ",e.appointment,(0,s.jsx)("button",{className:"mutedBtn",onClick:()=>eY(e.id),children:"Aceptar"}),(0,s.jsx)("button",{className:"mutedBtn",onClick:()=>eZ(e.id),children:"Rechazar"})]},e.id))})]}),(0,s.jsxs)("section",{className:"card",children:[(0,s.jsx)("h2",{children:"9) Recordatorios"}),(0,s.jsxs)("div",{className:"formGrid",children:[(0,s.jsx)("input",{className:"input",value:eB,onChange:e=>eI(e.target.value),placeholder:"ID turno"}),(0,s.jsx)("button",{className:"linkBtn",onClick:e$,children:"Colar recordatorio"}),(0,s.jsxs)("span",{className:"badge",children:["Mensajes: ",B.length]})]}),(0,s.jsx)("ul",{className:"list",children:B.map(e=>(0,s.jsxs)("li",{children:["Msg ",e.id," - ",e.channel," - ",e.status," - ",e.to_address,"sent"!==e.status&&(0,s.jsx)("button",{className:"mutedBtn",onClick:()=>e0(e.id),children:"Mark sent"})]},e.id))})]}),(0,s.jsxs)("section",{className:"card",children:[(0,s.jsx)("h2",{children:"10) Facturacion"}),(0,s.jsxs)("p",{className:"small",children:["Facturas emitidas: ",G.length]}),(0,s.jsx)("ul",{className:"list",children:G.map(e=>(0,s.jsxs)("li",{children:["#",e.number," - orden ",e.order," - total ",e.total," - ",e.status]},e.id))})]}),(0,s.jsxs)("section",{className:"card",children:[(0,s.jsx)("h2",{children:"11) Resumen Financiero"}),R?(0,s.jsxs)("ul",{className:"list",children:[(0,s.jsxs)("li",{children:["Ordenes: ",R.orders_count]}),(0,s.jsxs)("li",{children:["Ordenes pagadas: ",R.orders_paid_count]}),(0,s.jsxs)("li",{children:["Total ordenes: ARS ",R.orders_total]}),(0,s.jsxs)("li",{children:["Total cobrado: ARS ",R.payments_total]}),(0,s.jsxs)("li",{children:["Total facturado: ARS ",R.invoices_total]}),(0,s.jsxs)("li",{children:["Pendiente: ARS ",R.pending_amount]})]}):(0,s.jsx)("p",{className:"small",children:"Sin datos"})]})]}),(0,s.jsx)("h3",{className:"sectionTitle",children:"Log operativo"}),(0,s.jsx)("pre",{className:"pre",children:m})]})}},5739:(e,a,t)=>{"use strict";t.d(a,{A:()=>i,e:()=>c});let s="/api";async function n(e,a){let t=e.length>1&&e.endsWith("/")?e.slice(0,-1):e,n=["".concat(s).concat(t),"".concat(s).concat(t,"/")];for(let e=0;e<n.length;e+=1)try{let t=await fetch(n[e],a);if(404!==t.status||e===n.length-1)return t}catch(a){if(e===n.length-1)throw Error("Network error while contacting API")}throw Error("Unexpected API routing state")}async function i(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={};a.token&&(t.Authorization="Bearer ".concat(a.token)),a.tenantId&&(t["X-Tenant-ID"]=a.tenantId),void 0!==a.body&&(t["Content-Type"]="application/json");let s=await n(e,{method:a.method||"GET",headers:t,body:void 0!==a.body?JSON.stringify(a.body):void 0});if(!s.ok){let e=await s.text();throw Error("".concat(s.status," ").concat(s.statusText," :: ").concat(e))}return 204===s.status?{}:s.json()}function c(){return s}}},e=>{var a=a=>e(e.s=a);e.O(0,[173,441,517,358],()=>a(3395)),_N_E=e.O()}]);