(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[414],{7599:(e,t,a)=>{Promise.resolve().then(a.bind(a,8536))},8536:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(5155),s=a(8173),i=a.n(s),c=a(2115),l=a(5739);function r(){let[e,t]=(0,c.useState)(""),[a,s]=(0,c.useState)(""),[r,o]=(0,c.useState)([]),[d,h]=(0,c.useState)([]),[u,m]=(0,c.useState)([]),[g,x]=(0,c.useState)("Listo");async function j(e,t){try{let[a,n,s]=await Promise.all([(0,l.A)("/services/",{token:e,tenantId:t}),(0,l.A)("/appointments/",{token:e,tenantId:t}),(0,l.A)("/waitlists/",{token:e,tenantId:t})]);o(a),h(n),m(s),x("Datos cliente actualizados")}catch(e){x("Error cliente: ".concat(e.message))}}async function p(){if(!e||!a)return x("Falta token o tenant");await j(e,a)}async function N(){try{let e=await (0,l.A)("/auth/token/",{method:"POST",body:{username:"admin",password:"admin12345"}}),a=await (0,l.A)("/tenants/",{token:e.access}),n=a.find(e=>"demo-center"===e.slug)||a[0];if(!n)return x("No hay tenants disponibles");t(e.access),s(String(n.id)),localStorage.setItem("nila_token",e.access),localStorage.setItem("nila_tenant_id",String(n.id)),x("Sesion demo cargada (tenant ".concat(n.id,")")),await j(e.access,String(n.id))}catch(e){x("Error cargando demo: ".concat(e.message))}}return(0,c.useEffect)(()=>{t(localStorage.getItem("nila_token")||""),s(localStorage.getItem("nila_tenant_id")||"")},[]),(0,n.jsxs)("main",{children:[(0,n.jsx)("div",{className:"brand",children:"NILA"}),(0,n.jsx)("div",{className:"brandTag",children:"Strategy \xb7 Technology \xb7 Execution"}),(0,n.jsx)("h1",{className:"sectionTitle",children:"Workspace Cliente"}),(0,n.jsxs)("p",{className:"small",children:["API: ",(0,l.e)()]}),(0,n.jsxs)("div",{className:"card",children:[(0,n.jsxs)("div",{className:"formGrid",children:[(0,n.jsx)("input",{className:"input",value:e,onChange:e=>{t(e.target.value),localStorage.setItem("nila_token",e.target.value)},placeholder:"JWT token"}),(0,n.jsx)("input",{className:"input",value:a,onChange:e=>{s(e.target.value),localStorage.setItem("nila_tenant_id",e.target.value)},placeholder:"Tenant ID"}),(0,n.jsx)("button",{className:"linkBtn",onClick:p,children:"Refrescar"})]}),(0,n.jsx)("div",{className:"linkRow",children:(0,n.jsx)("button",{className:"mutedBtn",onClick:N,children:"Cargar sesion demo"})})]}),(0,n.jsxs)("div",{className:"grid",children:[(0,n.jsxs)("section",{className:"card",children:[(0,n.jsx)("h2",{children:"Marketplace servicios"}),(0,n.jsx)("ul",{className:"list",children:r.map(e=>(0,n.jsxs)("li",{children:[e.name," - ",e.discipline," - $",e.price]},e.id))})]}),(0,n.jsxs)("section",{className:"card",children:[(0,n.jsx)("h2",{children:"Mis turnos"}),(0,n.jsx)("ul",{className:"list",children:d.map(e=>(0,n.jsxs)("li",{children:["#",e.id," - ",e.status," - ",e.start_dt]},e.id))})]}),(0,n.jsxs)("section",{className:"card",children:[(0,n.jsx)("h2",{children:"Lista de espera"}),(0,n.jsx)("ul",{className:"list",children:u.map(e=>(0,n.jsxs)("li",{children:["#",e.id," - servicio ",e.service," - ",e.desired_date]},e.id))})]})]}),(0,n.jsx)("div",{className:"linkRow",children:(0,n.jsx)(i(),{className:"mutedBtn",href:"/client/dashboard",children:"Volver"})}),(0,n.jsx)("pre",{className:"pre",children:g})]})}},5739:(e,t,a)=>{"use strict";a.d(t,{A:()=>i,e:()=>c});let n="/api";async function s(e,t){let a=e.length>1&&e.endsWith("/")?e.slice(0,-1):e,s=["".concat(n).concat(a),"".concat(n).concat(a,"/")];for(let e=0;e<s.length;e+=1)try{let a=await fetch(s[e],t);if(404!==a.status||e===s.length-1)return a}catch(t){if(e===s.length-1)throw Error("Network error while contacting API")}throw Error("Unexpected API routing state")}async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={};t.token&&(a.Authorization="Bearer ".concat(t.token)),t.tenantId&&(a["X-Tenant-ID"]=t.tenantId),void 0!==t.body&&(a["Content-Type"]="application/json");let n=await s(e,{method:t.method||"GET",headers:a,body:void 0!==t.body?JSON.stringify(t.body):void 0});if(!n.ok){let e=await n.text();throw Error("".concat(n.status," ").concat(n.statusText," :: ").concat(e))}return 204===n.status?{}:n.json()}function c(){return n}}},e=>{var t=t=>e(e.s=t);e.O(0,[173,441,517,358],()=>t(7599)),_N_E=e.O()}]);